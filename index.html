<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>PGP Word List dictator</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
	<script src="//code.jquery.com/jquery-1.10.2.js"></script>
	<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
	<link rel="stylesheet" href="css/foundation.css" />
	<script src="js/vendor/modernizr.js"></script>
  <script>
    var evenWords = [
      "aardvark",
		"absurd",
		"accrue",
		"acme",
		"adrift",
		"adult",
		"afflict",
		"ahead",
		"aimless",
		"Algol",
		"allow",
		"alone",
		"ammo",
		"ancient",
		"apple",
		"artist",
		"assume",
		"Athens",
		"atlas",
		"Aztec",
		"baboon",
		"backfield",
		"backward",
		"banjo",
		"beaming",
		"bedlamp",
		"beehive",
		"beeswax",
		"befriend",
		"Belfast",
		"berserk",
		"billiard",
		"bison",
		"blackjack",
		"blockade",
		"blowtorch",
		"bluebird",
		"bombast",
		"bookshelf",
		"brackish",
		"breadline",
		"breakup",
		"brickyard",
		"briefcase",
		"Burbank",
		"button",
		"buzzard",
		"cement",
		"chairlift",
		"chatter",
		"checkup",
		"chisel",
		"choking",
		"chopper",
		"Christmas",
		"clamshell",
		"classic",
		"classroom",
		"cleanup",
		"clockwork",
		"cobra",
		"commence",
		"concert",
		"cowbell",
		"crackdown",
		"cranky",
		"crowfoot",
		"crucial",
		"crumpled",
		"crusade",
		"cubic",
		"dashboard",
		"deadbolt",
		"deckhand",
		"dogsled",
		"dragnet",
		"drainage",
		"dreadful",
		"drifter",
		"dropper",
		"drumbeat",
		"drunken",
		"Dupont",
		"dwelling",
		"eating",
		"edict",
		"egghead",
		"eightball",
		"endorse",
		"endow",
		"enlist",
		"erase",
		"escape",
		"exceed",
		"eyeglass",
		"eyetooth",
		"facial",
		"fallout",
		"flagpole",
		"flatfoot",
		"flytrap",
		"fracture",
		"framework",
		"freedom",
		"frighten",
		"gazelle",
		"Geiger",
		"glitter",
		"glucose",
		"goggles",
		"goldfish",
		"gremlin",
		"guidance",
		"hamlet",
		"highchair",
		"hockey",
		"indoors",
		"indulge",
		"inverse",
		"involve",
		"island",
		"jawbone",
		"keyboard",
		"kickoff",
		"kiwi",
		"klaxon",
		"locale",
		"lockup",
		"merit",
		"minnow",
		"miser",
		"Mohawk",
		"mural",
		"music",
		"necklace",
		"Neptune",
		"newborn",
		"nightbird",
		"Oakland",
		"obtuse",
		"offload",
		"optic",
		"orca",
		"payday",
		"peachy",
		"pheasant",
		"physique",
		"playhouse",
		"Pluto",
		"preclude",
		"prefer",
		"preshrunk",
		"printer",
		"prowler",
		"pupil",
		"puppy",
		"python",
		"quadrant",
		"quiver",
		"quota",
		"ragtime",
		"ratchet",
		"rebirth",
		"reform",
		"regain",
		"reindeer",
		"rematch",
		"repay",
		"retouch",
		"revenge",
		"reward",
		"rhythm",
		"ribcage",
		"ringbolt",
		"robust",
		"rocker",
		"ruffled",
		"sailboat",
		"sawdust",
		"scallion",
		"scenic",
		"scorecard",
		"Scotland",
		"seabird",
		"select",
		"sentence",
		"shadow",
		"shamrock",
		"showgirl",
		"skullcap",
		"skydive",
		"slingshot",
		"slowdown",
		"snapline",
		"snapshot",
		"snowcap",
		"snowslide",
		"solo",
		"southward",
		"soybean",
		"spaniel",
		"spearhead",
		"spellbind",
		"spheroid",
		"spigot",
		"spindle",
		"spyglass",
		"stagehand",
		"stagnate",
		"stairway",
		"standard",
		"stapler",
		"steamship",
		"sterling",
		"stockman",
		"stopwatch",
		"stormy",
		"sugar",
		"surmount",
		"suspense",
		"sweatband",
		"swelter",
		"tactics",
		"talon",
		"tapeworm",
		"tempest",
		"tiger",
		"tissue",
		"tonic",
		"topmost",
		"tracker",
		"transit",
		"trauma",
		"treadmill",
		"Trojan",
		"trouble",
		"tumor",
		"tunnel",
		"tycoon",
		"uncut",
		"unearth",
		"unwind",
		"uproot",
		"upset",
		"upshot",
		"vapor",
		"village",
		"virus",
		"Vulcan",
		"waffle",
		"wallet",
		"watchword",
		"wayside",
		"willow",
		"woodlark",
		"Zulu"];
	var oddWords=[
		"adroitness",
		"adviser",
		"aftermath",
		"aggregate",
		"alkali",
		"almighty",
		"amulet",
		"amusement",
		"antenna",
		"applicant",
		"Apollo",
		"armistice",
		"article",
		"asteroid",
		"Atlantic",
		"atmosphere",
		"autopsy",
		"Babylon",
		"backwater",
		"barbecue",
		"belowground",
		"bifocals",
		"bodyguard",
		"bookseller",
		"borderline",
		"bottomless",
		"Bradbury",
		"bravado",
		"Brazilian",
		"breakaway",
		"Burlington",
		"businessman",
		"butterfat",
		"Camelot",
		"candidate",
		"cannonball",
		"Capricorn",
		"caravan",
		"caretaker",
		"celebrate",
		"cellulose",
		"certify",
		"chambermaid",
		"Cherokee",
		"Chicago",
		"clergyman",
		"coherence",
		"combustion",
		"commando",
		"company",
		"component",
		"concurrent",
		"confidence",
		"conformist",
		"congregate",
		"consensus",
		"consulting",
		"corporate",
		"corrosion",
		"councilman",
		"crossover",
		"crucifix",
		"cumbersome",
		"customer",
		"Dakota",
		"decadence",
		"December",
		"decimal",
		"designing",
		"detector",
		"detergent",
		"determine",
		"dictator",
		"dinosaur",
		"direction",
		"disable",
		"disbelief",
		"disruptive",
		"distortion",
		"document",
		"embezzle",
		"enchanting",
		"enrollment",
		"enterprise",
		"equation",
		"equipment",
		"escapade",
		"Eskimo",
		"everyday",
		"examine",
		"existence",
		"exodus",
		"fascinate",
		"filament",
		"finicky",
		"forever",
		"fortitude",
		"frequency",
		"gadgetry",
		"Galveston",
		"getaway",
		"glossary",
		"gossamer",
		"graduate",
		"gravity",
		"guitarist",
		"hamburger",
		"Hamilton",
		"handiwork",
		"hazardous",
		"headwaters",
		"hemisphere",
		"hesitate",
		"hideaway",
		"holiness",
		"hurricane",
		"hydraulic",
		"impartial",
		"impetus",
		"inception",
		"indigo",
		"inertia",
		"infancy",
		"inferno",
		"informant",
		"insincere",
		"insurgent",
		"integrate",
		"intention",
		"inventive",
		"Istanbul",
		"Jamaica",
		"Jupiter",
		"leprosy",
		"letterhead",
		"liberty",
		"maritime",
		"matchmaker",
		"maverick",
		"Medusa",
		"megaton",
		"microscope",
		"microwave",
		"midsummer",
		"millionaire",
		"miracle",
		"misnomer",
		"molasses",
		"molecule",
		"Montana",
		"monument",
		"mosquito",
		"narrative",
		"nebula",
		"newsletter",
		"Norwegian",
		"October",
		"Ohio",
		"onlooker",
		"opulent",
		"Orlando",
		"outfielder",
		"Pacific",
		"pandemic",
		"Pandora",
		"paperweight",
		"paragon",
		"paragraph",
		"paramount",
		"passenger",
		"pedigree",
		"Pegasus",
		"penetrate",
		"perceptive",
		"performance",
		"pharmacy",
		"phonetic",
		"photograph",
		"pioneer",
		"pocketful",
		"politeness",
		"positive",
		"potato",
		"processor",
		"provincial",
		"proximate",
		"puberty",
		"publisher",
		"pyramid",
		"quantity",
		"racketeer",
		"rebellion",
		"recipe",
		"recover",
		"repellent",
		"replica",
		"reproduce",
		"resistor",
		"responsive",
		"retraction",
		"retrieval",
		"retrospect",
		"revenue",
		"revival",
		"revolver",
		"sandalwood",
		"sardonic",
		"Saturday",
		"savagery",
		"scavenger",
		"sensation",
		"sociable",
		"souvenir",
		"specialist",
		"speculate",
		"stethoscope",
		"stupendous",
		"supportive",
		"surrender",
		"suspicious",
		"sympathy",
		"tambourine",
		"telephone",
		"therapist",
		"tobacco",
		"tolerance",
		"tomorrow",
		"torpedo",
		"tradition",
		"travesty",
		"trombonist",
		"truncated",
		"typewriter",
		"ultimate",
		"undaunted",
		"underfoot",
		"unicorn",
		"unify",
		"universe",
		"unravel",
		"upcoming",
		"vacancy",
		"vagabond",
		"vertigo",
		"Virginia",
		"visitor",
		"vocalist",
		"voyager",
		"warranty",
		"Waterloo",
		"whimsical",
		"Wichita",
		"Wilmington",
		"Wyoming",
		"yesteryear",
		"Yucat√°n"];
var availableTags = [evenWords, oddWords];

  $(function() {
		var count =0;
    function split( val ) {
      return val.split( / \s*/ );
    }
    function extractLast( term ) {
      return split( term ).pop();
    }
 
    $( "#tags" )
      // don't navigate away from the field on tab when selecting an item
      .bind( "keydown", function( event ) {
        if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "ui-autocomplete" ).menu.active ) {
          event.preventDefault();
        }
      })
      .autocomplete({
        minLength: 0,
        source: function( request, response ) {
          // delegate back to autocomplete, but extract the last term
          response( $.ui.autocomplete.filter(
            availableTags[count%2], extractLast( request.term ) ) );
        },
        focus: function() {
          // prevent value inserted on focus
          return false;
        },
        select: function( event, ui ) {
          var terms = split( this.value );
          // remove the current input
          terms.pop();
          // add the selected item
          terms.push( ui.item.value );
          // add placeholder to get the comma-and-space at the end
          terms.push( "" );
          this.value = terms.join( " " );

	  //document.getElementById("list").innerHTML=terms;
	  var index = availableTags[count%2].indexOf(ui.item.value);
	  var byte = (index).toString(16).toUpperCase();

	  //pad byte
	  if (index < 0x10)
		byte = "0"+byte;

	  //spaces between pairs of bytes
	  if (count % 2 == 1)
		byte = byte + " ";

	  count++;

	  //newline every so often
//	  if (count % 12 == 0)
//		byte += "<br />";
	  document.getElementById("data").innerHTML+=byte;

          return false;
        }
      });
  });

  function toWords(){
	//alert("Converting");
	document.getElementById("words").innerHTML = "";
	var data = document.getElementById("data_input").value;
	data = data.replace(new RegExp("[^0-9a-fA-F]+"), "");
 	var count = 0;
	var words;
	
	for (var byteString = data.slice(0,2); (count*2)+2 <= data.length; byteString = data.slice(count*2, (count*2)+2)) {
		var pgpword = byteToWord(count++%2, byteString);
		document.getElementById("words").innerHTML+= " " + pgpword;
		//words.push(byteToWord(count++%2, byteString));
	}

	function byteToWord(parity, byteString) {
		byte = parseInt(byteString, 16);
		if (0x00 <= byte && byte <= 0xFF) {
			if(parity==0)
				return evenWords[byte];
			else
				return oddWords[byte];
		} else
			alert("Invalid data");
	}

	
	
	

  };
  
	function voice() {
		//cool stuff here
	}
  
	function clearn() {
		terms = [];
		count = 0;
		document.getElementById("words").value ="";
		document.getElementById("tags").value ="";
	}
  </script>
</head>
<body onload="document.getElementById('tags').focus()">
	<div class="row">
		<div class="large-12 columns">
			<h1>PGP Word List Dictation Tool</h1>
			<hr/>
		</div>
	</div>
	<div class="row">
		<form>
			<div class="medium-6 columns">
				<h3>Words &#8594; Bytes</h3>
				<label for="tags"  class="large-8 columns">
					Enter PGP Words:<input id="tags" type="text" onwebkitspeechchange="voice();" onspeechchange="voice();" x-webkit-speech>
				</label>
				<input type="button" onclick="clearn();" value="clear" class="postfix small radius button">
				</input>
				<div>
					<textarea id="data" onClick="this.select();"></textarea>
				</div>
			</div>
			<div class="medium-6 columns">
				<h3>Bytes &#8594; Words</h3>
				<textarea id="data_input"></textarea>
				<input class="small radius button" type="button" onclick="toWords();" value="Convert"></input>
				<div id="words"></div>
			</div>
		</form>
	</div>
	<div class="row">
		<div class="large-8 columns">
			Source code available on <a href="https://github.com/er2/lvhack14/"><img src="GitHub_Logo.png" width=88></img></a>
		</div>
	</div>
</body>
</html>
